<div class="container">
  <div class="row">
    <div class="col-xs-12 col-md-6 col-md-offset-3">
      <div class="devise-form">
        <%= simple_form_for @gist do |f| %>
          <%= f.input :description, placeholder: "gist description...", label: false %>
          <%= f.input :title, placeholder: "Filename including extension", label:false %>
          <div id="code" style="width: 100%; height: 200px; margin-bottom: 15px;"></div>
          <%= f.input :code, label: false %>
          <%= f.input :public %>
          <%= f.submit "Upload your gist!", class: "btn btn-success btn-form" %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<% content_for(:js) do %>
  <%= javascript_tag do %>
    $(function(){
      var textarea = $('textarea');
      textarea.hide();

      var editor = ace.edit("code");
      editor.setTheme("ace/theme/chrome");
      editor.getSession().setMode("ace/mode/javascript");

      editor.getSession().on('change', function(){
        textarea.val(editor.getSession().getValue());
      });

      textarea.val(editor.getSession().getValue());
    });
  <% end %>
<% end %>
